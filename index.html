<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluaci칩n Integral Vitiligo - Dr. Jos칠 Moya</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 300;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-bar {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .progress {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            width: 0%;
            transition: width 0.3s ease;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            border-radius: 5px;
            margin: 0 2px;
            background: #ecf0f1;
            color: #7f8c8d;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #3498db;
            color: white;
        }

        .step.completed {
            background: #27ae60;
            color: white;
        }

        .form-section {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            display: none;
        }

        .form-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52,152,219,0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(149,165,166,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .checkbox-item:hover {
            background: #e9ecef;
        }

        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            transform: scale(1.2);
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .radio-item:hover {
            background: #e9ecef;
        }

        .radio-item input[type="radio"] {
            width: auto;
            margin-right: 8px;
        }

        .alert {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .alert-info {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .report-section {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .contact-info {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
        }

        .investment-level {
            border-left: 5px solid;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }

        .level-1 {
            border-color: #e74c3c;
            background: #fdf2f2;
        }

        .level-2 {
            border-color: #f39c12;
            background: #fef9f2;
        }

        .level-3 {
            border-color: #27ae60;
            background: #f2f8f4;
        }

        .severity-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-left: 10px;
        }

        .low-risk { background: #d5f4e6; color: #27ae60; }
        .medium-risk { background: #fff3cd; color: #856404; }
        .high-risk { background: #f8d7da; color: #721c24; }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .step {
                font-size: 0.8em;
                padding: 8px 3px;
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
            
            .radio-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Evaluaci칩n Integral de Vitiligo</h1>
            <p>Dr. Jos칠 Moya - Protocolo de Evaluaci칩n Completo a Distancia</p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="step-indicator">
                <div class="step active" data-step="1">Datos B치sicos</div>
                <div class="step" data-step="2">Fitzpatrick</div>
                <div class="step" data-step="3">Antecedentes</div>
                <div class="step" data-step="4">Vitiligo Actual</div>
                <div class="step" data-step="5">Capacidad Inversi칩n</div>
                <div class="step" data-step="6">Reporte</div>
            </div>
        </div>

        <!-- Step 1: Datos B치sicos -->
        <div class="form-section active" data-step="1">
            <h2>Informaci칩n B치sica del Paciente</h2>
            
            <div class="form-group">
                <label for="nombre">Nombre Completo *</label>
                <input type="text" id="nombre" required>
            </div>

            <div class="form-group">
                <label for="edad">Edad *</label>
                <input type="number" id="edad" min="1" max="120" required>
            </div>

            <div class="form-group">
                <label for="sexo">Sexo *</label>
                <select id="sexo" required>
                    <option value="">Seleccione...</option>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                </select>
            </div>

            <div class="form-group">
                <label for="pais">Pa칤s de Residencia *</label>
                <input type="text" id="pais" required>
            </div>

            <div class="form-group">
                <label for="email">Email de Contacto *</label>
                <input type="email" id="email" required>
            </div>

            <div class="form-group">
                <label for="telefono">Tel칠fono con WhatsApp</label>
                <input type="tel" id="telefono">
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" disabled>Anterior</button>
                <button class="btn btn-primary" onclick="validarYRedirigir()">Siguiente</button>
            </div>
        </div>

        <!-- Step 2: Fitzpatrick simplificado para demo -->
        <div class="form-section" data-step="2">
            <h2>Evaluaci칩n de Fototipo (Escala Fitzpatrick)</h2>
            
            <div class="alert alert-info">
                <strong>Importante:</strong> La clasificaci칩n precisa de su fototipo es fundamental para determinar el protocolo de tratamiento m치s efectivo.
            </div>

            <div class="form-group">
                <label for="fitzpatrick">Seleccione su Fototipo *</label>
                <select id="fitzpatrick" required>
                    <option value="">Seleccione...</option>
                    <option value="1">Tipo I - Piel muy clara</option>
                    <option value="2">Tipo II - Piel clara</option>
                    <option value="3">Tipo III - Piel intermedia</option>
                    <option value="4">Tipo IV - Piel morena clara</option>
                    <option value="5">Tipo V - Piel morena</option>
                    <option value="6">Tipo VI - Piel negra</option>
                </select>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                <button class="btn btn-primary" onclick="nextStep()">Siguiente</button>
            </div>
        </div>

        <!-- Step 3: Antecedentes -->
        <div class="form-section" data-step="3">
            <h2>Antecedentes M칠dicos y Familiares</h2>

            <h3>Antecedentes Personales</h3>
            <div class="checkbox-grid">
                <div class="checkbox-item">
                    <input type="checkbox" id="infecciones_recurrentes" value="infecciones_recurrentes">
                    <label for="infecciones_recurrentes">Infecciones recurrentes</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="ansiedad" value="ansiedad">
                    <label for="ansiedad">Ansiedad/miedo esc칠nico</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="hipotiroidismo" value="hipotiroidismo">
                    <label for="hipotiroidismo">Hipotiroidismo</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="diabetes" value="diabetes">
                    <label for="diabetes">Diabetes</label>
                </div>
            </div>

            <h3 style="margin-top: 30px;">Antecedentes Familiares</h3>
            <div class="checkbox-grid">
                <div class="checkbox-item">
                    <input type="checkbox" id="fam_vitiligo" value="fam_vitiligo">
                    <label for="fam_vitiligo">Vitiligo en familia</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="fam_hipotiroidismo" value="fam_hipotiroidismo">
                    <label for="fam_hipotiroidismo">Hipotiroidismo familiar</label>
                </div>
                <div class="checkbox-item">
                    <input type="checkbox" id="fam_autoinmune" value="fam_autoinmune">
                    <label for="fam_autoinmune">Enfermedades autoinmunes familiares</label>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                <button class="btn btn-primary" onclick="nextStep()">Siguiente</button>
            </div>
        </div>

        <!-- Step 4: Vitiligo Actual -->
        <div class="form-section" data-step="4">
            <h2>Evaluaci칩n del Vitiligo Actual</h2>

            <div class="form-group">
                <label for="tiempo_vitiligo">쮿ace cu치nto tiempo not칩 las primeras manchas? *</label>
                <select id="tiempo_vitiligo" required>
                    <option value="">Seleccione...</option>
                    <option value="menos_6m">Menos de 6 meses</option>
                    <option value="6m_1a">6 meses a 1 a침o</option>
                    <option value="1a_3a">1 a 3 a침os</option>
                    <option value="3a_5a">3 a 5 a침os</option>
                    <option value="mas_5a">M치s de 5 a침os</option>
                </select>
            </div>

            <div class="form-group">
                <label>쮺칩mo ha sido la progresi칩n? *</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="estable" name="progresion" value="estable">
                        <label for="estable">Estable (no ha crecido)</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="lenta" name="progresion" value="lenta">
                        <label for="lenta">Progresi칩n lenta</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="rapida" name="progresion" value="rapida">
                        <label for="rapida">Progresi칩n r치pida</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="superficie_afectada">쯈u칠 porcentaje aproximado de su cuerpo est치 afectado? *</label>
                <select id="superficie_afectada" required>
                    <option value="">Seleccione...</option>
                    <option value="menor_1">Menos del 1%</option>
                    <option value="1_5">1% - 5%</option>
                    <option value="5_10">5% - 10%</option>
                    <option value="10_25">10% - 25%</option>
                    <option value="mayor_25">M치s del 25%</option>
                </select>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                <button class="btn btn-primary" onclick="nextStep()">Siguiente</button>
            </div>
        </div>

        <!-- Step 5: Capacidad de Inversi칩n -->
        <div class="form-section" data-step="5">
            <h2>Evaluaci칩n de Capacidad de Inversi칩n</h2>

            <div class="alert alert-info">
                <strong>Informaci칩n confidencial:</strong> Esta informaci칩n nos ayuda a recomendar las mejores opciones seg칰n su situaci칩n particular.
            </div>

            <div class="form-group">
                <label for="ingresos">쮺u치l es su rango de ingresos mensuales? *</label>
                <select id="ingresos" required>
                    <option value="">Seleccione...</option>
                    <option value="muy_bajo">Menos de $500 USD</option>
                    <option value="bajo">$500 - $1,500 USD</option>
                    <option value="medio">$1,500 - $3,000 USD</option>
                    <option value="medio_alto">$3,000 - $5,000 USD</option>
                    <option value="alto">$5,000 - $10,000 USD</option>
                    <option value="muy_alto">M치s de $10,000 USD</option>
                </select>
            </div>

            <div class="form-group">
                <label for="inversion_salud">쮺u치nto puede destinar mensualmente para tratamiento de salud? *</label>
                <select id="inversion_salud" required>
                    <option value="">Seleccione...</option>
                    <option value="limitado">$0 - $200 USD</option>
                    <option value="moderado">$200 - $500 USD</option>
                    <option value="considerable">$500 - $1,000 USD</option>
                    <option value="amplio">$1,000 - $2,500 USD</option>
                    <option value="ilimitado">M치s de $2,500 USD</option>
                </select>
            </div>

            <div class="form-group">
                <label>쯈u칠 tan prioritario es resolver su condici칩n de Vitiligo? *</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" id="baja_prioridad" name="prioridad" value="baja">
                        <label for="baja_prioridad">Baja prioridad</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="alta_prioridad" name="prioridad" value="alta">
                        <label for="alta_prioridad">Alta prioridad</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" id="maxima_prioridad" name="prioridad" value="maxima">
                        <label for="maxima_prioridad">M치xima prioridad</label>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                <button class="btn btn-primary" onclick="generateReport()">Generar Reporte</button>
            </div>
        </div>

        <!-- Step 6: Reporte -->
        <div class="form-section" data-step="6">
            <div class="report-section">
                <h2>Reporte de Evaluaci칩n Personalizado</h2>
                
                <div id="patientSummary"></div>
                <div id="riskAssessment"></div>
                <div id="recommendationsByLevel"></div>
                
                <div class="contact-info">
                    <h3>쯃isto para comenzar su tratamiento?</h3>
                    <p><strong>Dr. Jos칠 Moya</strong></p>
                    <p>游닎 Email: info@drmoya.com</p>
                    <p>游님 WhatsApp: +1 (305) 555-0123</p>
                    <p>游깷 Consultas virtuales disponibles</p>
                    <br>
                    <button class="btn btn-primary" onclick="sendReport()">Enviar Reporte por Email</button>
                    <br><br>
                    <button class="btn btn-primary" onclick="goToAyudaInmediata()" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
                        游 쯅ecesitas Ayuda Inmediata?
                    </button>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-secondary" onclick="prevStep()">Anterior</button>
                <button class="btn btn-primary" onclick="startOver()">Nueva Evaluaci칩n</button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        const formData = {};

        // Navigation functions
        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateProgress();
                    showStep(currentStep);
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
                showStep(currentStep);
            }
        }

        function showStep(step) {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelector(`[data-step="${step}"]`).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.step').forEach((stepEl, index) => {
                stepEl.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    stepEl.classList.add('completed');
                } else if (index + 1 === step) {
                    stepEl.classList.add('active');
                }
            });
        }

        function updateProgress() {
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function validateCurrentStep() {
            const currentSection = document.querySelector(`[data-step="${currentStep}"]`);
            const requiredFields = currentSection.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#e74c3c';
                    isValid = false;
                } else {
                    field.style.borderColor = '#ecf0f1';
                }
            });

            // Special validation for progression radio buttons
            if (currentStep === 4) {
                const progresion = document.querySelector('input[name="progresion"]:checked');
                if (!progresion) {
                    alert('Por favor seleccione c칩mo ha sido la progresi칩n.');
                    return false;
                }
            }

            // Special validation for priority radio buttons
            if (currentStep === 5) {
                const prioridad = document.querySelector('input[name="prioridad"]:checked');
                if (!prioridad) {
                    alert('Por favor indique la prioridad del tratamiento.');
                    return false;
                }
            }

            if (!isValid) {
                alert('Por favor complete todos los campos requeridos.');
            }

            return isValid;
        }

        // Data collection functions
        function collectFormData() {
            // Basic data
            formData.nombre = document.getElementById('nombre').value;
            formData.edad = document.getElementById('edad').value;
            formData.sexo = document.getElementById('sexo').value;
            formData.pais = document.getElementById('pais').value;
            formData.email = document.getElementById('email').value;
            formData.telefono = document.getElementById('telefono').value;
            
            // Fitzpatrick
            formData.fitzpatrick = document.getElementById('fitzpatrick').value;
            
            // Medical history
            formData.antecedentes = [];
            document.querySelectorAll('[data-step="3"] input[type="checkbox"]:checked').forEach(cb => {
                formData.antecedentes.push(cb.value);
            });
            
            // Current vitiligo
            formData.tiempo_vitiligo = document.getElementById('tiempo_vitiligo').value;
            formData.progresion = document.querySelector('input[name="progresion"]:checked')?.value;
            formData.superficie_afectada = document.getElementById('superficie_afectada').value;
            
            // Investment capacity
            formData.ingresos = document.getElementById('ingresos').value;
            formData.inversion_salud = document.getElementById('inversion_salud').value;
            formData.prioridad = document.querySelector('input[name="prioridad"]:checked')?.value;
        }

        function calculateRiskLevel() {
            let riskScore = 0;
            
            // Age factor
            if (formData.edad < 20) riskScore += 2;
            else if (formData.edad < 30) riskScore += 1;
            
            // Family history
            if (formData.antecedentes.includes('fam_vitiligo')) riskScore += 3;
            if (formData.antecedentes.includes('fam_hipotiroidismo')) riskScore += 2;
            if (formData.antecedentes.includes('fam_autoinmune')) riskScore += 2;
            
            // Current progression
            if (formData.progresion === 'rapida') riskScore += 3;
            else if (formData.progresion === 'lenta') riskScore += 2;
            
            // Surface area
            if (formData.superficie_afectada === 'mayor_25') riskScore += 3;
            else if (formData.superficie_afectada === '10_25') riskScore += 2;
            else if (formData.superficie_afectada === '5_10') riskScore += 1;
            
            if (riskScore <= 3) return 'low';
            else if (riskScore <= 7) return 'medium';
            else return 'high';
        }

        function getInvestmentLevel() {
            const ingresos = formData.ingresos;
            const inversion = formData.inversion_salud;
            const prioridad = formData.prioridad;
            
            let score = 0;
            
            // Income level
            if (ingresos === 'muy_alto' || ingresos === 'alto') score += 3;
            else if (ingresos === 'medio_alto' || ingresos === 'medio') score += 2;
            else score += 1;
            
            // Investment capacity
            if (inversion === 'ilimitado' || inversion === 'amplio') score += 3;
            else if (inversion === 'considerable') score += 2;
            else score += 1;
            
            // Priority
            if (prioridad === 'maxima') score += 2;
            else if (prioridad === 'alta') score += 1;
            
            if (score >= 7) return 3; // No problem
            else if (score >= 4) return 2; // Not much problem
            else return 1; // Real problem
        }

        function generateReport() {
            if (!validateCurrentStep()) return;
            
            collectFormData();
            
            const riskLevel = calculateRiskLevel();
            const investmentLevel = getInvestmentLevel();
            
            displayReport(riskLevel, investmentLevel);
            
            currentStep = 6;
            updateProgress();
            showStep(6);
        }

        function displayReport(riskLevel, investmentLevel) {
            // Patient Summary
            const summaryHtml = `
                <h3>Resumen del Paciente</h3>
                <p><strong>Nombre:</strong> ${formData.nombre}</p>
                <p><strong>Edad:</strong> ${formData.edad} a침os</p>
                <p><strong>Fototipo:</strong> Fitzpatrick ${formData.fitzpatrick}</p>
                <p><strong>Tiempo con Vitiligo:</strong> ${getTimeDescription(formData.tiempo_vitiligo)}</p>
                <p><strong>Progresi칩n:</strong> ${formData.progresion}</p>
                <p><strong>Superficie afectada:</strong> ${getSurfaceDescription(formData.superficie_afectada)}</p>
            `;
            
            // Risk Assessment
            const riskColor = riskLevel === 'high' ? 'high-risk' : riskLevel === 'medium' ? 'medium-risk' : 'low-risk';
            const riskText = riskLevel === 'high' ? 'Alto Riesgo' : riskLevel === 'medium' ? 'Riesgo Moderado' : 'Bajo Riesgo';
            
            const riskHtml = `
                <h3>Evaluaci칩n de Riesgo <span class="severity-indicator ${riskColor}">${riskText}</span></h3>
                <p>${getRiskDescription(riskLevel)}</p>
            `;
            
            // Recommendations by Investment Level
            const recommendationsHtml = getRecommendationsByLevel(investmentLevel);
            
            document.getElementById('patientSummary').innerHTML = summaryHtml;
            document.getElementById('riskAssessment').innerHTML = riskHtml;
            document.getElementById('recommendationsByLevel').innerHTML = recommendationsHtml;
        }

        function getTimeDescription(time) {
            const descriptions = {
                'menos_6m': 'Menos de 6 meses',
                '6m_1a': '6 meses a 1 a침o',
                '1a_3a': '1 a 3 a침os',
                '3a_5a': '3 a 5 a침os',
                'mas_5a': 'M치s de 5 a침os'
            };
            return descriptions[time] || 'No especificado';
        }

        function getSurfaceDescription(surface) {
            const descriptions = {
                'menor_1': 'Menos del 1%',
                '1_5': '1% - 5%',
                '5_10': '5% - 10%',
                '10_25': '10% - 25%',
                'mayor_25': 'M치s del 25%'
            };
            return descriptions[surface] || 'No especificado';
        }

        function getRiskDescription(riskLevel) {
            if (riskLevel === 'high') {
                return 'Su perfil indica un riesgo alto de progresi칩n. Se recomienda intervenci칩n inmediata y seguimiento estrecho.';
            } else if (riskLevel === 'medium') {
                return 'Su perfil muestra un riesgo moderado. Es importante iniciar tratamiento preventivo y realizar seguimiento regular.';
            } else {
                return 'Su perfil indica un riesgo bajo de complicaciones. Con manejo adecuado se pueden esperar resultados favorables.';
            }
        }

        function getRecommendationsByLevel(level) {
            let html = '<h3>Recomendaciones Personalizadas</h3>';
            
            if (level === 1) {
                html += `
                    <div class="investment-level level-1">
                        <h4>游댮 Plan Esencial - Inversi칩n Limitada</h4>
                        <p><strong>Costo estimado:</strong> $200-500 USD mensuales</p>
                        <ul>
                            <li><strong>Consulta virtual inicial</strong> con evaluaci칩n completa ($150)</li>
                            <li><strong>Protocolo b치sico</strong> con suplementos esenciales ($100-200/mes)</li>
                            <li><strong>Fototerapia casera</strong> con l치mpara UVB-NB ($300 inicial)</li>
                            <li><strong>Seguimiento mensual virtual</strong> ($100/mes)</li>
                        </ul>
                    </div>
                `;
            } else if (level === 2) {
                html += `
                    <div class="investment-level level-2">
                        <h4>游리 Plan Integral - Inversi칩n Moderada</h4>
                        <p><strong>Costo estimado:</strong> $500-1,200 USD mensuales</p>
                        <ul>
                            <li><strong>Consulta presencial o virtual</strong> con an치lisis completo ($400)</li>
                            <li><strong>Protocolo avanzado</strong> con medicamentos especializados ($300-600/mes)</li>
                            <li><strong>Fototerapia profesional</strong> supervisada ($200/mes)</li>
                            <li><strong>Seguimiento quincenal</strong> con ajustes de protocolo ($150/mes)</li>
                        </ul>
                    </div>
                `;
            } else {
                html += `
                    <div class="investment-level level-3">
                        <h4>游릭 Plan Premium - Inversi칩n Completa</h4>
                        <p><strong>Costo estimado:</strong> $1,200-3,000 USD mensuales</p>
                        <ul>
                            <li><strong>Consulta presencial</strong> en Miami o virtual premium ($600)</li>
                            <li><strong>Protocolo completo personalizado</strong> ($800-1,500/mes)</li>
                            <li><strong>Fototerapia de 칰ltima generaci칩n</strong> ($400/mes)</li>
                            <li><strong>Seguimiento semanal</strong> con equipo multidisciplinario ($300/mes)</li>
                            <li><strong>Acceso directo 24/7</strong> al Dr. Moya</li>
                        </ul>
                    </div>
                `;
            }
            
            return html;
        }

        function sendReport() {
            alert('Su reporte ha sido enviado a ' + formData.email + '. Recibir치 una copia detallada en los pr칩ximos minutos.');
        }

        function goToAyudaInmediata() {
            // Esta funci칩n simula la navegaci칩n a la p치gina de ayuda inmediata
            alert('游 Redirigiendo a la p치gina de Ayuda Inmediata...\n\nEn una implementaci칩n real, esto lo llevar칤a a /antecedentes.html');
            // En producci칩n ser칤a: window.location.href = '/antecedentes.html';
        }

        function startOver() {
            currentStep = 1;
            Object.keys(formData).forEach(key => delete formData[key]);
            document.querySelectorAll('input, select, textarea').forEach(field => {
                if (field.type === 'checkbox' || field.type === 'radio') {
                    field.checked = false;
                } else {
                    field.value = '';
                }
            });
            updateProgress();
            showStep(1);
        }

        // Initialize
        updateProgress();


        function validarYRedirigir() {
  const campos = document.querySelectorAll('[required]');
  let valido = true;

  campos.forEach(campo => {
    if (!campo.value.trim()) {
      campo.style.border = '2px solid red';
      valido = false;
    } else {
      campo.style.border = '';
    }
  });

  if (!valido) {
    alert('Por favor complete todos los campos obligatorios antes de continuar.');
    return;
  }

  // Si todo est치 bien, redirige
  window.location.href = 'fitzpatrick.html';
}

    </script>
</body>
</html>
